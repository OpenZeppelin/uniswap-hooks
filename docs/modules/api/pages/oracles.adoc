:github-icon: pass:[<svg class="icon"><use href="#github-icon"/></svg>]
:BaseOracleHook: pass:normal[xref:oracles.adoc#BaseOracleHook[`BaseOracleHook`]]
:OracleHookWithV3Adapters: pass:normal[xref:oracles.adoc#OracleHookWithV3Adapters[`OracleHookWithV3Adapters`]]
:xref-BaseOracleHook-constructor-int24-: xref:oracles.adoc#BaseOracleHook-constructor-int24-
:xref-BaseOracleHook-getHookPermissions--: xref:oracles.adoc#BaseOracleHook-getHookPermissions--
:xref-BaseOracleHook-_afterInitialize-address-struct-PoolKey-uint160-int24-: xref:oracles.adoc#BaseOracleHook-_afterInitialize-address-struct-PoolKey-uint160-int24-
:xref-BaseOracleHook-_beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-: xref:oracles.adoc#BaseOracleHook-_beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-
:xref-BaseOracleHook-observe-uint32---PoolId-: xref:oracles.adoc#BaseOracleHook-observe-uint32---PoolId-
:xref-BaseOracleHook-increaseObservationCardinalityNext-uint16-PoolId-: xref:oracles.adoc#BaseOracleHook-increaseObservationCardinalityNext-uint16-PoolId-
:xref-BaseOracleHook-MAX_ABS_TICK_DELTA-int24: xref:oracles.adoc#BaseOracleHook-MAX_ABS_TICK_DELTA-int24
:xref-BaseOracleHook-observationsById-mapping-PoolId----struct-Oracle-Observation-65535--: xref:oracles.adoc#BaseOracleHook-observationsById-mapping-PoolId----struct-Oracle-Observation-65535--
:xref-BaseOracleHook-stateById-mapping-PoolId----struct-BaseOracleHook-ObservationState-: xref:oracles.adoc#BaseOracleHook-stateById-mapping-PoolId----struct-BaseOracleHook-ObservationState-
:xref-BaseHook-poolManager--: xref:base.adoc#BaseHook-poolManager--
:xref-BaseHook-_validateHookAddress-contract-BaseHook-: xref:base.adoc#BaseHook-_validateHookAddress-contract-BaseHook-
:xref-BaseHook-beforeInitialize-address-struct-PoolKey-uint160-: xref:base.adoc#BaseHook-beforeInitialize-address-struct-PoolKey-uint160-
:xref-BaseHook-_beforeInitialize-address-struct-PoolKey-uint160-: xref:base.adoc#BaseHook-_beforeInitialize-address-struct-PoolKey-uint160-
:xref-BaseHook-afterInitialize-address-struct-PoolKey-uint160-int24-: xref:base.adoc#BaseHook-afterInitialize-address-struct-PoolKey-uint160-int24-
:xref-BaseHook-beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-: xref:base.adoc#BaseHook-beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-
:xref-BaseHook-_beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-: xref:base.adoc#BaseHook-_beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-
:xref-BaseHook-beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-: xref:base.adoc#BaseHook-beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-
:xref-BaseHook-_beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-: xref:base.adoc#BaseHook-_beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-
:xref-BaseHook-afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-: xref:base.adoc#BaseHook-afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-
:xref-BaseHook-_afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-: xref:base.adoc#BaseHook-_afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-
:xref-BaseHook-afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-: xref:base.adoc#BaseHook-afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-
:xref-BaseHook-_afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-: xref:base.adoc#BaseHook-_afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-
:xref-BaseHook-beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-: xref:base.adoc#BaseHook-beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-
:xref-BaseHook-afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-: xref:base.adoc#BaseHook-afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-
:xref-BaseHook-_afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-: xref:base.adoc#BaseHook-_afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-
:xref-BaseHook-beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-: xref:base.adoc#BaseHook-beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-
:xref-BaseHook-_beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-: xref:base.adoc#BaseHook-_beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-
:xref-BaseHook-afterDonate-address-struct-PoolKey-uint256-uint256-bytes-: xref:base.adoc#BaseHook-afterDonate-address-struct-PoolKey-uint256-uint256-bytes-
:xref-BaseHook-_afterDonate-address-struct-PoolKey-uint256-uint256-bytes-: xref:base.adoc#BaseHook-_afterDonate-address-struct-PoolKey-uint256-uint256-bytes-
:xref-BaseOracleHook-IncreaseObservationCardinalityNext-PoolId-uint16-uint16-: xref:oracles.adoc#BaseOracleHook-IncreaseObservationCardinalityNext-PoolId-uint16-uint16-
:xref-BaseOracleHook-PoolNotInitialized--: xref:oracles.adoc#BaseOracleHook-PoolNotInitialized--
:xref-BaseHook-HookNotImplemented--: xref:base.adoc#BaseHook-HookNotImplemented--
:xref-BaseHook-NotPoolManager--: xref:base.adoc#BaseHook-NotPoolManager--
:xref-OracleHookWithV3Adapters-constructor-int24-: xref:oracles.adoc#OracleHookWithV3Adapters-constructor-int24-
:xref-OracleHookWithV3Adapters-_afterInitialize-address-struct-PoolKey-uint160-int24-: xref:oracles.adoc#OracleHookWithV3Adapters-_afterInitialize-address-struct-PoolKey-uint160-int24-
:xref-OracleHookWithV3Adapters-standardAdapter-mapping-PoolId----address-: xref:oracles.adoc#OracleHookWithV3Adapters-standardAdapter-mapping-PoolId----address-
:xref-OracleHookWithV3Adapters-truncatedAdapter-mapping-PoolId----address-: xref:oracles.adoc#OracleHookWithV3Adapters-truncatedAdapter-mapping-PoolId----address-
:xref-BaseOracleHook-getHookPermissions--: xref:oracles.adoc#BaseOracleHook-getHookPermissions--
:xref-BaseOracleHook-_beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-: xref:oracles.adoc#BaseOracleHook-_beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-
:xref-BaseOracleHook-observe-uint32---PoolId-: xref:oracles.adoc#BaseOracleHook-observe-uint32---PoolId-
:xref-BaseOracleHook-increaseObservationCardinalityNext-uint16-PoolId-: xref:oracles.adoc#BaseOracleHook-increaseObservationCardinalityNext-uint16-PoolId-
:xref-BaseOracleHook-MAX_ABS_TICK_DELTA-int24: xref:oracles.adoc#BaseOracleHook-MAX_ABS_TICK_DELTA-int24
:xref-BaseOracleHook-observationsById-mapping-PoolId----struct-Oracle-Observation-65535--: xref:oracles.adoc#BaseOracleHook-observationsById-mapping-PoolId----struct-Oracle-Observation-65535--
:xref-BaseOracleHook-stateById-mapping-PoolId----struct-BaseOracleHook-ObservationState-: xref:oracles.adoc#BaseOracleHook-stateById-mapping-PoolId----struct-BaseOracleHook-ObservationState-
:xref-BaseHook-poolManager--: xref:base.adoc#BaseHook-poolManager--
:xref-BaseHook-_validateHookAddress-contract-BaseHook-: xref:base.adoc#BaseHook-_validateHookAddress-contract-BaseHook-
:xref-BaseHook-beforeInitialize-address-struct-PoolKey-uint160-: xref:base.adoc#BaseHook-beforeInitialize-address-struct-PoolKey-uint160-
:xref-BaseHook-_beforeInitialize-address-struct-PoolKey-uint160-: xref:base.adoc#BaseHook-_beforeInitialize-address-struct-PoolKey-uint160-
:xref-BaseHook-afterInitialize-address-struct-PoolKey-uint160-int24-: xref:base.adoc#BaseHook-afterInitialize-address-struct-PoolKey-uint160-int24-
:xref-BaseHook-beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-: xref:base.adoc#BaseHook-beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-
:xref-BaseHook-_beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-: xref:base.adoc#BaseHook-_beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-
:xref-BaseHook-beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-: xref:base.adoc#BaseHook-beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-
:xref-BaseHook-_beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-: xref:base.adoc#BaseHook-_beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-
:xref-BaseHook-afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-: xref:base.adoc#BaseHook-afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-
:xref-BaseHook-_afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-: xref:base.adoc#BaseHook-_afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-
:xref-BaseHook-afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-: xref:base.adoc#BaseHook-afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-
:xref-BaseHook-_afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-: xref:base.adoc#BaseHook-_afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-
:xref-BaseHook-beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-: xref:base.adoc#BaseHook-beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-
:xref-BaseHook-afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-: xref:base.adoc#BaseHook-afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-
:xref-BaseHook-_afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-: xref:base.adoc#BaseHook-_afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-
:xref-BaseHook-beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-: xref:base.adoc#BaseHook-beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-
:xref-BaseHook-_beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-: xref:base.adoc#BaseHook-_beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-
:xref-BaseHook-afterDonate-address-struct-PoolKey-uint256-uint256-bytes-: xref:base.adoc#BaseHook-afterDonate-address-struct-PoolKey-uint256-uint256-bytes-
:xref-BaseHook-_afterDonate-address-struct-PoolKey-uint256-uint256-bytes-: xref:base.adoc#BaseHook-_afterDonate-address-struct-PoolKey-uint256-uint256-bytes-
:xref-OracleHookWithV3Adapters-AdaptersDeployed-PoolId-address-address-: xref:oracles.adoc#OracleHookWithV3Adapters-AdaptersDeployed-PoolId-address-address-
:xref-BaseOracleHook-IncreaseObservationCardinalityNext-PoolId-uint16-uint16-: xref:oracles.adoc#BaseOracleHook-IncreaseObservationCardinalityNext-PoolId-uint16-uint16-
:xref-BaseOracleHook-PoolNotInitialized--: xref:oracles.adoc#BaseOracleHook-PoolNotInitialized--
:xref-BaseHook-HookNotImplemented--: xref:base.adoc#BaseHook-HookNotImplemented--
:xref-BaseHook-NotPoolManager--: xref:base.adoc#BaseHook-NotPoolManager--
= Oracles

[.readme-notice]
NOTE: This document is better viewed on the docs page.

Oracle hooks that enable Uniswap v4 pools to function as price oracles by recording price observations and exposing oracle interfaces.

 * {BaseOracleHook}: Enables a Uniswap V4 pool to record price observations and expose an oracle interface for TWAP queries.
 * {OracleHookWithV3Adapters}: Extends oracle functionality with V3-compatible adapter contracts for integration with existing V3 oracle consumers.

== Panoptic Oracles

:PoolNotInitialized: pass:normal[xref:#BaseOracleHook-PoolNotInitialized--[`++PoolNotInitialized++`]]
:IncreaseObservationCardinalityNext: pass:normal[xref:#BaseOracleHook-IncreaseObservationCardinalityNext-PoolId-uint16-uint16-[`++IncreaseObservationCardinalityNext++`]]
:ObservationState: pass:normal[xref:#BaseOracleHook-ObservationState[`++ObservationState++`]]
:MAX_ABS_TICK_DELTA: pass:normal[xref:#BaseOracleHook-MAX_ABS_TICK_DELTA-int24[`++MAX_ABS_TICK_DELTA++`]]
:observationsById: pass:normal[xref:#BaseOracleHook-observationsById-mapping-PoolId----struct-Oracle-Observation-65535--[`++observationsById++`]]
:stateById: pass:normal[xref:#BaseOracleHook-stateById-mapping-PoolId----struct-BaseOracleHook-ObservationState-[`++stateById++`]]
:constructor: pass:normal[xref:#BaseOracleHook-constructor-int24-[`++constructor++`]]
:getHookPermissions: pass:normal[xref:#BaseOracleHook-getHookPermissions--[`++getHookPermissions++`]]
:_afterInitialize: pass:normal[xref:#BaseOracleHook-_afterInitialize-address-struct-PoolKey-uint160-int24-[`++_afterInitialize++`]]
:_beforeSwap: pass:normal[xref:#BaseOracleHook-_beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-[`++_beforeSwap++`]]
:observe: pass:normal[xref:#BaseOracleHook-observe-uint32---PoolId-[`++observe++`]]
:increaseObservationCardinalityNext: pass:normal[xref:#BaseOracleHook-increaseObservationCardinalityNext-uint16-PoolId-[`++increaseObservationCardinalityNext++`]]

[.contract]
[[BaseOracleHook]]
=== `++BaseOracleHook++` link:https://github.com/OpenZeppelin/uniswap-hooks/blob/master/src/oracles/panoptic/BaseOracleHook.sol[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```solidity
import "uniswap-hooks/src/oracles/panoptic/BaseOracleHook.sol";
```

A hook that enables a Uniswap V4 pool to record price observations and expose an oracle interface

[.contract-index]
.Functions
--
* {xref-BaseOracleHook-constructor-int24-}[`++constructor(_maxAbsTickDelta)++`]
* {xref-BaseOracleHook-getHookPermissions--}[`++getHookPermissions()++`]
* {xref-BaseOracleHook-_afterInitialize-address-struct-PoolKey-uint160-int24-}[`++_afterInitialize(, key, , tick)++`]
* {xref-BaseOracleHook-_beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-}[`++_beforeSwap(, key, , )++`]
* {xref-BaseOracleHook-observe-uint32---PoolId-}[`++observe(secondsAgos, underlyingPoolId)++`]
* {xref-BaseOracleHook-increaseObservationCardinalityNext-uint16-PoolId-}[`++increaseObservationCardinalityNext(observationCardinalityNext, underlyingPoolId)++`]
* {xref-BaseOracleHook-MAX_ABS_TICK_DELTA-int24}[`++MAX_ABS_TICK_DELTA()++`]
* {xref-BaseOracleHook-observationsById-mapping-PoolId----struct-Oracle-Observation-65535--}[`++observationsById()++`]
* {xref-BaseOracleHook-stateById-mapping-PoolId----struct-BaseOracleHook-ObservationState-}[`++stateById()++`]

[.contract-subindex-inherited]
.BaseHook
* {xref-BaseHook-poolManager--}[`++poolManager()++`]
* {xref-BaseHook-_validateHookAddress-contract-BaseHook-}[`++_validateHookAddress(hook)++`]
* {xref-BaseHook-beforeInitialize-address-struct-PoolKey-uint160-}[`++beforeInitialize(sender, key, sqrtPriceX96)++`]
* {xref-BaseHook-_beforeInitialize-address-struct-PoolKey-uint160-}[`++_beforeInitialize(, , )++`]
* {xref-BaseHook-afterInitialize-address-struct-PoolKey-uint160-int24-}[`++afterInitialize(sender, key, sqrtPriceX96, tick)++`]
* {xref-BaseHook-beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-}[`++beforeAddLiquidity(sender, key, params, hookData)++`]
* {xref-BaseHook-_beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-}[`++_beforeAddLiquidity(, , , )++`]
* {xref-BaseHook-beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-}[`++beforeRemoveLiquidity(sender, key, params, hookData)++`]
* {xref-BaseHook-_beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-}[`++_beforeRemoveLiquidity(, , , )++`]
* {xref-BaseHook-afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-}[`++afterAddLiquidity(sender, key, params, delta0, delta1, hookData)++`]
* {xref-BaseHook-_afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-}[`++_afterAddLiquidity(, , , , , )++`]
* {xref-BaseHook-afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-}[`++afterRemoveLiquidity(sender, key, params, delta0, delta1, hookData)++`]
* {xref-BaseHook-_afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-}[`++_afterRemoveLiquidity(, , , , , )++`]
* {xref-BaseHook-beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-}[`++beforeSwap(sender, key, params, hookData)++`]
* {xref-BaseHook-afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-}[`++afterSwap(sender, key, params, delta, hookData)++`]
* {xref-BaseHook-_afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-}[`++_afterSwap(, , , , )++`]
* {xref-BaseHook-beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-}[`++beforeDonate(sender, key, amount0, amount1, hookData)++`]
* {xref-BaseHook-_beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-}[`++_beforeDonate(, , , , )++`]
* {xref-BaseHook-afterDonate-address-struct-PoolKey-uint256-uint256-bytes-}[`++afterDonate(sender, key, amount0, amount1, hookData)++`]
* {xref-BaseHook-_afterDonate-address-struct-PoolKey-uint256-uint256-bytes-}[`++_afterDonate(, , , , )++`]

[.contract-subindex-inherited]
.IHooks

--

[.contract-index]
.Events
--
* {xref-BaseOracleHook-IncreaseObservationCardinalityNext-PoolId-uint16-uint16-}[`++IncreaseObservationCardinalityNext(underlyingPoolId, observationCardinalityNextOld, observationCardinalityNextNew)++`]

[.contract-subindex-inherited]
.BaseHook

[.contract-subindex-inherited]
.IHooks

--

[.contract-index]
.Errors
--
* {xref-BaseOracleHook-PoolNotInitialized--}[`++PoolNotInitialized()++`]

[.contract-subindex-inherited]
.BaseHook
* {xref-BaseHook-HookNotImplemented--}[`++HookNotImplemented()++`]
* {xref-BaseHook-NotPoolManager--}[`++NotPoolManager()++`]

[.contract-subindex-inherited]
.IHooks

--

[.contract-item]
[[BaseOracleHook-constructor-int24-]]
==== `[.contract-item-name]#++constructor++#++(int24 _maxAbsTickDelta)++` [.item-kind]#public#

Initializes a Uniswap V4 pool with this hook, stores baseline observation state, and optionally performs a cardinality increase.

[.contract-item]
[[BaseOracleHook-getHookPermissions--]]
==== `[.contract-item-name]#++getHookPermissions++#++() → struct Hooks.Permissions++` [.item-kind]#public#

Get the hook permissions to signal which hook functions are to be implemented.

Used at deployment to validate the address correctly represents the expected permissions.

[.contract-item]
[[BaseOracleHook-_afterInitialize-address-struct-PoolKey-uint160-int24-]]
==== `[.contract-item-name]#++_afterInitialize++#++(address, struct PoolKey key, uint160, int24 tick) → bytes4++` [.item-kind]#internal#

The hook called after the state of a pool is initialized

[.contract-item]
[[BaseOracleHook-_beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-]]
==== `[.contract-item-name]#++_beforeSwap++#++(address, struct PoolKey key, struct SwapParams, bytes) → bytes4, BeforeSwapDelta, uint24++` [.item-kind]#internal#

The hook called before a swap.

NOTE: Note that this hook does not return either a `BeforeSwapDelta` or lp fee override — this call is used exclusively for recording price observations.

[.contract-item]
[[BaseOracleHook-observe-uint32---PoolId-]]
==== `[.contract-item-name]#++observe++#++(uint32[] secondsAgos, PoolId underlyingPoolId) → int56[], int56[]++` [.item-kind]#external#

Returns the cumulative tick as of each timestamp `secondsAgo` from the current block timestamp on `underlyingPoolId`.

NOTE: To get a time weighted average tick, you must call this with two values, one representing
the beginning of the period and another for the end of the period. E.g., to get the last hour time-weighted average tick,
you must call it with secondsAgos = [3600, 0].

NOTE: The time weighted average tick represents the geometric time weighted average price of the pool, in
log base sqrt(1.0001) of currency1 / currency0. The TickMath library can be used to go from a tick value to a ratio.

[.contract-item]
[[BaseOracleHook-increaseObservationCardinalityNext-uint16-PoolId-]]
==== `[.contract-item-name]#++increaseObservationCardinalityNext++#++(uint16 observationCardinalityNext, PoolId underlyingPoolId)++` [.item-kind]#public#

Increase the maximum number of price and liquidity observations that the oracle of `underlyingPoolId`.

[.contract-item]
[[BaseOracleHook-MAX_ABS_TICK_DELTA-int24]]
==== `[.contract-item-name]#++MAX_ABS_TICK_DELTA++#++() → int24++` [.item-kind]#public#

The maximum absolute tick delta that can be observed for the truncated oracle

[.contract-item]
[[BaseOracleHook-observationsById-mapping-PoolId----struct-Oracle-Observation-65535--]]
==== `[.contract-item-name]#++observationsById++#++() → mapping(PoolId &#x3D;&gt; struct Oracle.Observation[65535])++` [.item-kind]#public#

The list of observations for a given pool ID

[.contract-item]
[[BaseOracleHook-stateById-mapping-PoolId----struct-BaseOracleHook-ObservationState-]]
==== `[.contract-item-name]#++stateById++#++() → mapping(PoolId &#x3D;&gt; struct BaseOracleHook.ObservationState)++` [.item-kind]#public#

The current observation array state for the given pool ID

[.contract-item]
[[BaseOracleHook-IncreaseObservationCardinalityNext-PoolId-uint16-uint16-]]
==== `[.contract-item-name]#++IncreaseObservationCardinalityNext++#++(PoolId indexed underlyingPoolId, uint16 observationCardinalityNextOld, uint16 observationCardinalityNextNew)++` [.item-kind]#event#

Emitted by the hook for increases to the number of observations that can be stored.

NOTE: `observationCardinalityNext` is not the observation cardinality until an observation is written at the index
just before a mint/swap/burn.

[.contract-item]
[[BaseOracleHook-PoolNotInitialized--]]
==== `[.contract-item-name]#++PoolNotInitialized++#++()++` [.item-kind]#error#

Observation cardinality cannot be increased if the pool is not initialized

:AdaptersDeployed: pass:normal[xref:#OracleHookWithV3Adapters-AdaptersDeployed-PoolId-address-address-[`++AdaptersDeployed++`]]
:standardAdapter: pass:normal[xref:#OracleHookWithV3Adapters-standardAdapter-mapping-PoolId----address-[`++standardAdapter++`]]
:truncatedAdapter: pass:normal[xref:#OracleHookWithV3Adapters-truncatedAdapter-mapping-PoolId----address-[`++truncatedAdapter++`]]
:constructor: pass:normal[xref:#OracleHookWithV3Adapters-constructor-int24-[`++constructor++`]]
:_afterInitialize: pass:normal[xref:#OracleHookWithV3Adapters-_afterInitialize-address-struct-PoolKey-uint160-int24-[`++_afterInitialize++`]]

[.contract]
[[OracleHookWithV3Adapters]]
=== `++OracleHookWithV3Adapters++` link:https://github.com/OpenZeppelin/uniswap-hooks/blob/master/src/oracles/panoptic/OracleHookWithV3Adapters.sol[{github-icon},role=heading-link]

[.hljs-theme-light.nopadding]
```solidity
import "uniswap-hooks/src/oracles/panoptic/OracleHookWithV3Adapters.sol";
```

A hook that enables a Uniswap V4 pool to record price observations and expose an oracle interface with Uniswap V3-compatible adapters

[.contract-index]
.Functions
--
* {xref-OracleHookWithV3Adapters-constructor-int24-}[`++constructor(_maxAbsTickDelta)++`]
* {xref-OracleHookWithV3Adapters-_afterInitialize-address-struct-PoolKey-uint160-int24-}[`++_afterInitialize(, key, , tick)++`]
* {xref-OracleHookWithV3Adapters-standardAdapter-mapping-PoolId----address-}[`++standardAdapter()++`]
* {xref-OracleHookWithV3Adapters-truncatedAdapter-mapping-PoolId----address-}[`++truncatedAdapter()++`]

[.contract-subindex-inherited]
.BaseOracleHook
* {xref-BaseOracleHook-getHookPermissions--}[`++getHookPermissions()++`]
* {xref-BaseOracleHook-_beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-}[`++_beforeSwap(, key, , )++`]
* {xref-BaseOracleHook-observe-uint32---PoolId-}[`++observe(secondsAgos, underlyingPoolId)++`]
* {xref-BaseOracleHook-increaseObservationCardinalityNext-uint16-PoolId-}[`++increaseObservationCardinalityNext(observationCardinalityNext, underlyingPoolId)++`]
* {xref-BaseOracleHook-MAX_ABS_TICK_DELTA-int24}[`++MAX_ABS_TICK_DELTA()++`]
* {xref-BaseOracleHook-observationsById-mapping-PoolId----struct-Oracle-Observation-65535--}[`++observationsById()++`]
* {xref-BaseOracleHook-stateById-mapping-PoolId----struct-BaseOracleHook-ObservationState-}[`++stateById()++`]

[.contract-subindex-inherited]
.BaseHook
* {xref-BaseHook-poolManager--}[`++poolManager()++`]
* {xref-BaseHook-_validateHookAddress-contract-BaseHook-}[`++_validateHookAddress(hook)++`]
* {xref-BaseHook-beforeInitialize-address-struct-PoolKey-uint160-}[`++beforeInitialize(sender, key, sqrtPriceX96)++`]
* {xref-BaseHook-_beforeInitialize-address-struct-PoolKey-uint160-}[`++_beforeInitialize(, , )++`]
* {xref-BaseHook-afterInitialize-address-struct-PoolKey-uint160-int24-}[`++afterInitialize(sender, key, sqrtPriceX96, tick)++`]
* {xref-BaseHook-beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-}[`++beforeAddLiquidity(sender, key, params, hookData)++`]
* {xref-BaseHook-_beforeAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-}[`++_beforeAddLiquidity(, , , )++`]
* {xref-BaseHook-beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-}[`++beforeRemoveLiquidity(sender, key, params, hookData)++`]
* {xref-BaseHook-_beforeRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-bytes-}[`++_beforeRemoveLiquidity(, , , )++`]
* {xref-BaseHook-afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-}[`++afterAddLiquidity(sender, key, params, delta0, delta1, hookData)++`]
* {xref-BaseHook-_afterAddLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-}[`++_afterAddLiquidity(, , , , , )++`]
* {xref-BaseHook-afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-}[`++afterRemoveLiquidity(sender, key, params, delta0, delta1, hookData)++`]
* {xref-BaseHook-_afterRemoveLiquidity-address-struct-PoolKey-struct-ModifyLiquidityParams-BalanceDelta-BalanceDelta-bytes-}[`++_afterRemoveLiquidity(, , , , , )++`]
* {xref-BaseHook-beforeSwap-address-struct-PoolKey-struct-SwapParams-bytes-}[`++beforeSwap(sender, key, params, hookData)++`]
* {xref-BaseHook-afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-}[`++afterSwap(sender, key, params, delta, hookData)++`]
* {xref-BaseHook-_afterSwap-address-struct-PoolKey-struct-SwapParams-BalanceDelta-bytes-}[`++_afterSwap(, , , , )++`]
* {xref-BaseHook-beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-}[`++beforeDonate(sender, key, amount0, amount1, hookData)++`]
* {xref-BaseHook-_beforeDonate-address-struct-PoolKey-uint256-uint256-bytes-}[`++_beforeDonate(, , , , )++`]
* {xref-BaseHook-afterDonate-address-struct-PoolKey-uint256-uint256-bytes-}[`++afterDonate(sender, key, amount0, amount1, hookData)++`]
* {xref-BaseHook-_afterDonate-address-struct-PoolKey-uint256-uint256-bytes-}[`++_afterDonate(, , , , )++`]

[.contract-subindex-inherited]
.IHooks

--

[.contract-index]
.Events
--
* {xref-OracleHookWithV3Adapters-AdaptersDeployed-PoolId-address-address-}[`++AdaptersDeployed(poolId, standardAdapter, truncatedAdapter)++`]

[.contract-subindex-inherited]
.BaseOracleHook
* {xref-BaseOracleHook-IncreaseObservationCardinalityNext-PoolId-uint16-uint16-}[`++IncreaseObservationCardinalityNext(underlyingPoolId, observationCardinalityNextOld, observationCardinalityNextNew)++`]

[.contract-subindex-inherited]
.BaseHook

[.contract-subindex-inherited]
.IHooks

--

[.contract-index]
.Errors
--

[.contract-subindex-inherited]
.BaseOracleHook
* {xref-BaseOracleHook-PoolNotInitialized--}[`++PoolNotInitialized()++`]

[.contract-subindex-inherited]
.BaseHook
* {xref-BaseHook-HookNotImplemented--}[`++HookNotImplemented()++`]
* {xref-BaseHook-NotPoolManager--}[`++NotPoolManager()++`]

[.contract-subindex-inherited]
.IHooks

--

[.contract-item]
[[OracleHookWithV3Adapters-constructor-int24-]]
==== `[.contract-item-name]#++constructor++#++(int24 _maxAbsTickDelta)++` [.item-kind]#public#

Initializes a Uniswap V4 pool with this hook, stores baseline observation state, and optionally performs a cardinality increase.

[.contract-item]
[[OracleHookWithV3Adapters-_afterInitialize-address-struct-PoolKey-uint160-int24-]]
==== `[.contract-item-name]#++_afterInitialize++#++(address, struct PoolKey key, uint160, int24 tick) → bytes4++` [.item-kind]#internal#

The hook called after the state of a pool is initialized

[.contract-item]
[[OracleHookWithV3Adapters-standardAdapter-mapping-PoolId----address-]]
==== `[.contract-item-name]#++standardAdapter++#++() → mapping(PoolId &#x3D;&gt; address)++` [.item-kind]#public#

Maps pool IDs to their standard V3 oracle adapters

[.contract-item]
[[OracleHookWithV3Adapters-truncatedAdapter-mapping-PoolId----address-]]
==== `[.contract-item-name]#++truncatedAdapter++#++() → mapping(PoolId &#x3D;&gt; address)++` [.item-kind]#public#

Maps pool IDs to their truncated V3 oracle adapters

[.contract-item]
[[OracleHookWithV3Adapters-AdaptersDeployed-PoolId-address-address-]]
==== `[.contract-item-name]#++AdaptersDeployed++#++(PoolId indexed poolId, address standardAdapter, address truncatedAdapter)++` [.item-kind]#event#

Emitted when adapter contracts are deployed for a pool.

